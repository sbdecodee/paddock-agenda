<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Grupo Automotriz Magna · Agenda</title>
  <meta name="description" content="Agenda e invitados del evento de Grupo Automotriz Magna."/>
  <meta name="robots" content="noindex,nofollow"/>
  <meta name="theme-color" content="#b00020"/>
  <meta name="apple-mobile-web-app-capable" content="yes"/>
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"/>
  <meta name="apple-mobile-web-app-title" content="Magna Agenda"/>

  <!-- Tipografía -->
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&display=swap" rel="stylesheet">

  <!-- Icono y estilos -->
  <link rel="icon" href="./assets/logo.svg" type="image/svg+xml"/>
  <link rel="apple-touch-icon" href="./assets/icons/icon-192.png"/>
  <link rel="manifest" href="./manifest.webmanifest"/>
  <link rel="stylesheet" href="./styles.css"/>

  <!-- Ocultar UI en impresión -->
  <style>@media print{.toolbar,.tabs,.subtabs,.footer{display:none!important}}</style>
</head>
<body>
  <div class="container">

    <!-- Masthead unificado: header + notice + buscador -->
    <section class="masthead" aria-label="Encabezado y búsqueda">
      <header class="header hero" aria-label="Encabezado Grupo Automotriz Magna">
        <img src="./assets/AGM - ROJO CON BLANCO.png" alt="Logo Grupo Automotriz Magna" class="logo" width="40" height="40"/>
        <div class="header-text">
          <div class="hello" id="hello"></div>
        </div>
        <button id="installBtn" class="btn hidden" style="margin-left:auto">Instalar</button>
      </header>

      <div class="notice on-masthead">
        Esta es la <b>Agenda principal</b>. Usa la búsqueda, filtros y pestañas de días para navegar.
        La sección <b>Nuestro Equipo</b> es un apoyo informativo.
      </div>

      <!-- Buscador global unificado (Equipo + Agenda) -->
      <form id="globalSearchForm" class="toolbar" role="search" aria-label="Búsqueda general" onsubmit="event.preventDefault()">
        <input id="globalSearch" class="input" placeholder="Buscar por nombre, sesión o etiqueta…" autocomplete="off"/>
      </form>
    </section>

    <!-- Pestañas principales (Agenda por defecto) -->
    <nav class="tabs" role="tablist" aria-label="Secciones">
      <button id="tab-agenda" class="tab is-active" data-tab="agenda" aria-controls="agenda" aria-selected="true">Agenda</button>
      <button id="tab-guests" class="tab" data-tab="guests" aria-controls="guests" aria-selected="false">Nuestro Equipo</button>
    </nav>

    <!-- AGENDA (prioridad) -->
    <section id="agenda" class="panel" role="tabpanel" aria-label="Agenda" aria-labelledby="tab-agenda">
      <div class="row-between" style="align-items:end">
        <h2 class="section-title">Nuestro Equipo</h2>
        <small class="meta">View all</small>
      </div>
      <p class="section-hint">Deslizar para ver más</p>
      <div class="toolbar">
        <input id="guestSearch" class="input" placeholder="Buscar por nombre, posición o región." aria-label="Buscar en equipo"/>
        <div class="spacer"></div>
        <button id="guestPrev" class="btn-outline" aria-label="Anterior"><</button>
        <button id="guestNext" class="btn-outline" aria-label="Siguiente">></button>
      </div>
      <div id="guestList" class="slider" aria-label="Carrusel de equipo"></div>
      <p id="guestEmpty" class="notice hidden">Sin resultados. Ajusta tu búsqueda.</p>
      <div class="toolbar">
        <input id="search" class="input" placeholder="Buscar por título, ponente o etiqueta." aria-label="Buscar en agenda"/>
        <select id="typeSelect" class="select" aria-label="Filtrar por tipo">
          <option value="">Todos los tipos</option>
        </select>
        <button class="btn" id="clearBtn">Limpiar filtros</button>
        <button class="btn" onclick="window.print()">Imprimir / PDF</button>
      </div>

      <div class="calendar">
        <div class="calendar-head row-between">
          <div class="cal-title"><span id="selectedLabel"></span></div>
          <button id="todayBtn" class="btn-outline" title="Ir a hoy">Hoy</button>
        </div>
        <div id="dayStrip" class="day-strip" role="tablist" aria-label="Días"></div>
      </div>
      <main id="agendaList" class="stack timeline" role="main" aria-live="polite"></main>
      <p id="empty" class="notice hidden">No hay sesiones que coincidan. Cambia los filtros o el texto de búsqueda.</p>
    </section>

    <!-- INVITADOS (adicional) -->
    <section id="guests" class="panel hidden" role="tabpanel" aria-label="Nuestro Equipo" aria-labelledby="tab-guests">
      <div class="toolbar">
        <input id="guestSearch" class="input" placeholder="Buscar por nombre, posición o región." aria-label="Buscar en equipo"/>
      </div>
      <div class="slider-nav" aria-hidden="false" style="display:flex; gap:.5rem; justify-content:flex-end; margin:.35rem 0;">
        <button id="guestPrev" class="btn-outline" aria-label="Anterior"><</button>
        <button id="guestNext" class="btn-outline" aria-label="Siguiente">></button>
      </div>
      <div id="guestList" class="slider" aria-label="Carrusel de equipo"></div>
      <p id="guestEmpty" class="notice hidden">Sin resultados. Ajusta tu búsqueda.</p>
    </section>

    <footer class="footer">&copy; <span id="year"></span> Grupo Automotriz Magna &middot; Hecho con HTML/CSS/JS</footer>
  </div>

  <!-- Modal de instalación PWA -->
  <div id="installOverlay" class="install-overlay hidden" role="dialog" aria-modal="true" aria-labelledby="installTitle">
    <div class="install-dialog">
      <h3 id="installTitle" class="install-title">Añadir a la pantalla de inicio</h3>
      <p id="installSub" class="install-sub">Instala Magna Agenda para acceso rápido y sin conexión.</p>
      <p id="installHint" class="install-hint hidden">En iPhone/iPad abre en Safari, toca Compartir y luego “Añadir a pantalla de inicio”.</p>
      <div class="install-actions">
        <button id="installConfirm" class="btn">Instalar</button>
        <button id="installDismiss" class="btn-outline">Ahora no</button>
      </div>
    </div>
  </div>

  <script>
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('./service-worker.js').catch(console.error);
      });
    }
  </script>
  <script src="./script.js"></script>
  <script>
    document.getElementById("year").textContent = new Date().getFullYear();
    document.getElementById("lastUpdated")?.textContent = new Date().toLocaleString();
  </script>
</body>
</html>


